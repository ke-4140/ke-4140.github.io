(this["webpackJsonpkeyframe-extractor"]=this["webpackJsonpkeyframe-extractor"]||[]).push([[0],{10:function(e,t,n){e.exports={row:"Counter_row__1C_4f",value:"Counter_value__1d0te",button:"Counter_button__1xpSV",textbox:"Counter_textbox__3ODaX",asyncButton:"Counter_asyncButton__2UAr3 Counter_button__1xpSV"}},28:function(e,t,n){},47:function(e,t,n){},52:function(e,t,n){},55:function(e,t,n){},56:function(e,t,n){},74:function(e,t,n){},87:function(e,t,n){"use strict";n.r(t);var c=n(1),i=n.n(c),s=n(17),a=n.n(s),r=(n(47),n(11)),o=n(3),l=(n(52),n(0));function d(){return Object(l.jsxs)("header",{children:[Object(l.jsxs)("div",{className:"topNavBar",children:[Object(l.jsx)("div",{children:Object(l.jsx)(r.b,{className:"logo",to:"/",children:"KE"})}),Object(l.jsx)("div",{})]}),Object(l.jsx)("hr",{className:"divider",class:"solid"})]})}n(55);function u(e){var t=e.onClick,n=(e.iconBefore,e.label),c=(e.iconAfter,e.width),i=void 0===c?"150px":c,s=e.height,a=void 0===s?"25px":s;return Object(l.jsx)("div",{type:"button",className:"button",style:{width:i,height:a},onClick:t,children:Object(l.jsx)("span",{className:"label",children:n})})}n(56);function j(e){var t=e.onPress,n=(e.iconBefore,e.label,e.iconAfter,e.width),c=void 0===n?"250px":n,i=e.height,s=void 0===i?"300px":i,a=e.flexDirection,r=void 0===a?"row":a,o=e.children;return Object(l.jsx)("div",{type:"card",className:"card",style:{width:c,height:s,flexDirection:r,justifyContent:"space-around"},onClick:t,children:o})}var b=n(5),f=n(2),m=(n(28),n(16)),x=n(13),h=n(12),p=n(20),y=n.n(p),O=Object(h.b)({name:"system",initialState:{logo:"KE",extractionDetails:null,pdfTotalPages:null,youtubeURL:"",frames:[],keyframes:[],totalVideoTime:0,frameScriptTuple:null,owner:null,jobIsCompleted:!1,extractionProgress:0,loadedFramesNum:600},reducers:{setYoutubeURL:function(e,t){e.youtubeURL=t.payload},setOwner:function(e,t){e.owner=t.payload},setFrames:function(e,t){e.frames=t.payload},setFrameScriptTuple:function(e,t){e.frameScriptTuple=t.payload},setPdfTotalPages:function(e,t){e.pdfTotalPages=t.payload},setContents:function(e,t){e.contents=t.payload},addKeyframes:function(e,t){e.keyframes=e.keyframes.concat(t.payload)},appendKeyFrame:function(e,t){e.keyframes=[{vid_time:t.payload.index,img_addr:t.payload.imgAddr,userCreated:!0}].concat(Object(x.a)(e.keyframes))},completesJob:function(e,t){e.jobIsCompleted=!0},setExtractionProgress:function(e,t){e.extractionProgress=t.payload},addLoadedFramesNum:function(e,t){e.loadedFramesNum=e.loadedFramesNum+600>e.totalVideoTime?e.totalVideoTime:e.loadedFramesNum+600},setTotalVideoTime:function(e,t){e.totalVideoTime=t.payload},setExtractionDetails:function(e,t){e.extractionDetails=t.payload},setKeyFrames:function(e,t){e.keyframes=t.payload},toggleKeyframeFromFrame:function(e,t){e.frames=e.frames.map((function(e,n){return n===t.payload.index?Object(m.a)(Object(m.a)({},e),{},{isKey:t.payload.status}):e}))}}}),g=O.actions,v=g.toggleKeyframeFromFrame,w=g.setKeyFrames,k=(g.setExtractionDetails,g.setTotalVideoTime),C=g.addLoadedFramesNum,D=g.setExtractionProgress,E=g.completesJob,F=g.appendKeyFrame,S=g.addKeyframes,T=g.setOwner,K=g.setYoutubeURL,I=g.setFrames,N=g.setFrameScriptTuple,A=g.setPdfTotalPages,B=g.setContents,P=function(e){return function(e,t){console.log("SYSTEM/fetchKeyFrames");var n=Object(x.a)(t().system.frames);Object(x.a)(t().system.keyframes).map((function(e,t){n[e.vid_time]=Object(m.a)(Object(m.a)({},n[e.vid_time]),{},{imgAddr:e.img_addr,isExtracted:!e.userCreated,isKey:!0})})),e(I(n))}},_=function(e){return function(t,n){t(k(e)),console.log(e);var c=e,i=Array.from({length:c},(function(e,t){return t})).map((function(e){return{id:"init-".concat(e),label:"",isExtracted:!1,isKey:!1}}));t(I(i))}},M=function(e,t){return function(n,c){console.log("SYSTEM/fetchNewKeyFrame");var i=c().system.youtubeURL;n(v({index:e,status:t}));var s=30*parseInt(e);if(t)return y.a.get("http://ke.ddns.net/api/frame",{params:{src:i,frame_no:s}}).then((function(c){n(F({index:e,status:t,imgAddr:c.data}))})).catch((function(e){console.log(e.status)}));var a=Object(x.a)(c().system.keyframes).filter((function(t){return t.vid_time!=e}));n(w(a))}};function V(e,t){return e.vid_time<t.vid_time?-1:e.vid_time>t.vid_time?1:0}var H=function(e){return e.system.loadedFramesNum},Z=function(e){return e.system.jobIsCompleted},L=function(e){return e.system.extractionProgress},R=function(e){return e.system.youtubeURL},Y=function(e){return e.system.frames},J=function(e){return e.system.contents},W=O.reducer;function U(){var e=Object(o.b)(),t=Object(c.useState)("https://www.youtube.com/watch?v=pZSegEXtgAE"),n=Object(b.a)(t,2),i=n[0],s=n[1],a=Object(f.f)();function r(){e(function(e,t){return function(n){return console.log("SYSTEM/postYoutubeSrc"),n(K(e)),y.a.post("http://ke.ddns.net/api/job",{src:e}).then((function(e){n(T(e.data.data.owner)),t.push("/editor")})).catch((function(e){console.log(e.status)}))}}(i,a))}return Object(l.jsx)("div",{children:Object(l.jsxs)(j,{flexDirection:"row",width:"814px",height:"100px",children:[Object(l.jsxs)("div",{children:[Object(l.jsx)("span",{children:"Paste Youtube Link: "}),Object(l.jsx)("input",{class:"input",type:"text",value:i,onChange:function(e){return s(e.target.value)}})]}),Object(l.jsx)(u,{label:"Ready to Edit",onClick:function(){return r()}})]})})}var X=function(){return Object(l.jsxs)("div",{className:"app",children:[Object(l.jsx)(d,{}),Object(l.jsx)("h1",{children:"Videos to  Frames with Key Extractor"}),Object(l.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:Object(l.jsx)(U,{})}),Object(l.jsxs)("div",{className:"menu",children:[Object(l.jsxs)(j,{flexDirection:"column",children:[Object(l.jsx)("h3",{children:"Editor "}),Object(l.jsx)("span",{}),Object(l.jsx)(u,{label:"Demo"})]}),Object(l.jsxs)(j,{flexDirection:"column",children:[Object(l.jsx)("h3",{children:"Preview"}),Object(l.jsx)(u,{label:"Demo"})]}),Object(l.jsxs)(j,{flexDirection:"column",children:[Object(l.jsx)("h3",{children:"Export"}),Object(l.jsx)(u,{label:"Demo"})]})]})]})},q=Object(h.b)({name:"counter",initialState:{value:0},reducers:{increment:function(e){e.value+=1},decrement:function(e){e.value-=1},incrementByAmount:function(e,t){e.value+=t.payload}}}),G=q.actions,z=G.increment,$=G.decrement,Q=G.incrementByAmount,ee=function(e){return e.counter.value},te=q.reducer,ne=Object(h.a)({reducer:{counter:te,system:W}}),ce=n(10),ie=n.n(ce);n(74);var se=n(39);function ae(e){var t=e.seconds,n=e.player,i=e.seekTo,s=e.playAt,a=e.extractionProgress,r=e.hoverPreview,d=Object(o.b)(),u=Object(o.c)(Y),j=Object(o.c)(H),f=Object(c.useState)(10),m=Object(b.a)(f,2),x=m[0],h=(m[1],Object(c.useState)("")),p=Object(b.a)(h,2),y=p[0],O=p[1],g=Object(c.useState)(0),v=Object(b.a)(g,2),w=v[0],k=v[1];function D(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];console.log("toggle:"+e),t=!t,d(M(parseInt(e),t));var n=t?"ADDED":"REMOVED";O("Last "+n+" keyframe at "+E(e))}function E(e){var t=Math.floor(e/60);return(e=e%60)<10?"".concat(t,":0").concat(e):"".concat(t,":").concat(e)}return Object(c.useEffect)((function(){var e=setInterval((function(){k(n.getCurrentTime())}),1e3);return function(){return clearInterval(e)}}),[]),Object(l.jsxs)("div",{children:[Object(l.jsxs)("div",{class:"controlPane",children:[Object(l.jsx)("span",{children:"Timeline "}),Object(l.jsxs)("span",{children:["[Keyframes Extraction Status: ",a,"% extracted]"]}),Object(l.jsx)("div",{class:"controlButtons",children:Object(l.jsxs)("span",{children:[" ",E(Math.floor(w))," /",E(t)," "]})})]}),Object(l.jsxs)("div",{class:"progressBar",children:[Object(l.jsx)("div",{class:"ExtractProgressNode",style:{width:"".concat(a,"%")}}),Object(l.jsx)("div",{class:"TimeProgressNode",style:{width:"".concat(w/t*100,"%")}})]}),Object(l.jsx)(se.a,{dataLength:j,next:function(){console.log("loads more, current:",j),d(C())},hasMore:!0,className:"wrapper",children:u.slice(0,j).map((function(e,t){return Object(l.jsxs)("div",{onH:!0,class:"item",style:{display:"flex",backgroundColor:e.isKey?"lightgray":"white"},children:[Object(l.jsx)("div",{class:"view",style:{display:"flex",width:x,flex:3},onDoubleClick:function(){return function(e,t){console.log(t),r(t),k(e),s(e)}(t,e.imgAddr)},onClick:function(){e.isKey?function(e){k(e),i(e)}(t):D(t,e.isKey)}}),e.isKey?Object(l.jsx)("div",{class:"remove",style:{display:"flex",justifyContent:"center",backgroundColor:e.isExtracted?"aquamarine":"pink",flex:1},onClick:function(){return D(t,e.isKey)},children:"x"}):Object(l.jsx)("div",{style:{display:"flex",flex:0},class:"none"})]})}))}),Object(l.jsxs)("div",{class:"helperText",children:[y,"   "]})]})}var re=n(40);function oe(e){var t=e.contents,n=void 0===t?[{frame:"https://images.unsplash.com/photo-1616788590183-c6b1d59a9b78?ixid=MXwxMjA3fDB8MHxlZGl0b3JpYWwtZmVlZHw1fHx8ZW58MHx8fA%3D%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=60",transcript:"testing script 1"},{frame:"https://images.unsplash.com/photo-1593642532744-d377ab507dc8?ixid=MXwxMjA3fDF8MHxlZGl0b3JpYWwtZmVlZHwxNnx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=60",transcript:"testing script 2"},{frame:"https://images.unsplash.com/photo-1616788590183-c6b1d59a9b78?ixid=MXwxMjA3fDB8MHxlZGl0b3JpYWwtZmVlZHw1fHx8ZW58MHx8fA%3D%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=60",transcript:"testing script 3"},{frame:"https://images.unsplash.com/photo-1616788590183-c6b1d59a9b78?ixid=MXwxMjA3fDB8MHxlZGl0b3JpYWwtZmVlZHw1fHx8ZW58MHx8fA%3D%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=60",transcript:"testing script 4"}]:t,c=e.title,i=void 0===c?"Nice Slides":c,s=e.enableTranscript,a=e.KFA,r=void 0!==a&&a;return Object(l.jsxs)("div",{style:{width:551,height:918.71,padding:24},children:[Object(l.jsxs)("div",{style:{display:"flex",height:60,alignItems:"flex-end",justifyContent:"space-between",flexDirection:"row"},children:[Object(l.jsxs)("div",{children:[i," "]}),Object(l.jsxs)("div",{children:["created on KE on ",(new Date).toJSON().slice(0,10).replace(/-/g,"/")," "]})]}),r?Object(l.jsx)("div",{style:{justifyContent:"center",alignItems:"center",flexDirection:"row",marginTop:16,marginBottom:16,border:"1px solid black",weight:546,height:640},children:"KFA Content"}):Object(l.jsx)("div",{children:n.map((function(e,t){return Object(l.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexDirection:"row",marginTop:16,marginBottom:16},children:[Object(l.jsx)("div",{style:{display:"flex",border:"1px solid black",height:146,width:261,justifyContent:"center",alignItems:"center"},children:Object(l.jsx)("img",{src:e.frame,height:146,width:261})}),s?Object(l.jsx)("textarea",{rows:"10",defaultValue:e.transcript,style:{resize:"none",width:261,height:144}}):Object(l.jsx)("textarea",{rows:"10",style:{resize:"none",width:261,height:144}})]})}))}),Object(l.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",margin:16},children:[Object(l.jsx)("div",{children:" Footnote"}),Object(l.jsx)("textarea",{rows:"7",style:{resize:"none",width:550}})]})]})}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(86);a.a.render(Object(l.jsx)(i.a.StrictMode,{children:Object(l.jsx)(o.a,{store:ne,children:Object(l.jsx)(r.a,{children:Object(l.jsxs)(f.c,{children:[Object(l.jsx)(f.a,{exact:!0,path:"/",component:X}),Object(l.jsx)(f.a,{exact:!0,path:"/counter",component:function(){var e=Object(o.c)(ee),t=Object(o.b)(),n=Object(c.useState)("2"),i=Object(b.a)(n,2),s=i[0],a=i[1];return Object(l.jsxs)("div",{children:[Object(l.jsxs)("div",{className:ie.a.row,children:[Object(l.jsx)("button",{className:ie.a.button,"aria-label":"Increment value",onClick:function(){return t(z())},children:"+"}),Object(l.jsx)("span",{className:ie.a.value,children:e}),Object(l.jsx)("button",{className:ie.a.button,"aria-label":"Decrement value",onClick:function(){return t($())},children:"-"})]}),Object(l.jsxs)("div",{className:ie.a.row,children:[Object(l.jsx)("input",{className:ie.a.textbox,"aria-label":"Set increment amount",value:s,onChange:function(e){return a(e.target.value)}}),Object(l.jsx)("button",{className:ie.a.button,onClick:function(){return t(Q(Number(s)||0))},children:"Add Amount"}),Object(l.jsx)("button",{className:ie.a.asyncButton,onClick:function(){return t((e=Number(s)||0,function(t){setTimeout((function(){t(Q(e))}),1e3)}));var e},children:"Add Async"})]})]})}}),Object(l.jsx)(f.a,{exact:!0,path:"/uploader",component:U}),Object(l.jsx)(f.a,{exact:!0,path:"/editor",component:function(){var e=Object(o.b)(),t=Object(f.f)(),n=Object(o.c)(L),i=Object(o.c)(Z),s=Object(o.c)(R),a=Object(c.useState)(null),r=Object(b.a)(a,2),j=r[0],m=r[1],x=Object(c.useState)(null),h=Object(b.a)(x,2),p=h[0],O=h[1],g=Object(c.useState)(800),v=Object(b.a)(g,2),w=v[0],k=v[1],C=Object(c.useState)(!0),F=Object(b.a)(C,2),T=F[0],K=F[1],I=Object(c.useState)(""),N=Object(b.a)(I,2),A=N[0],B=N[1];return Object(c.useEffect)((function(){var t=setInterval((function(){i||(e((function(e,t){var n=t().system.owner,c=t().system.youtubeURL;return t().system.frames,console.log("SYSTEM/getJobStatus"),y.a.get("http://ke.ddns.net/api/job",{params:{uuid:n,src:c}}).then((function(t){var n=JSON.parse(t.data.data.job.attributes);e(S(t.data.data.outputs)),e(P(t.data.data.outputs[0].id)),e(D(Math.round(100*t.data.data.outputs[t.data.data.outputs.length-1].vid_time/n.length))),"finished"==t.data.data.job.status&&(console.log("Job completed"),e(E()),e(D(100)))})).catch((function(e){}))})),console.log("fetch new frames every 2 seconds"))}),2e3);O(t)}),[]),Object(c.useEffect)((function(){clearInterval(p)}),[i]),Object(l.jsxs)("div",{children:[Object(l.jsx)(d,{}),Object(l.jsxs)("div",{style:{display:"flex",marginRight:20,marginBottom:10,justifyContent:"flex-end"},children:[Object(l.jsx)(u,{onClick:function(){e(_(w))},label:"Reset Keyframes"}),Object(l.jsx)(u,{onClick:function(){t.push("/preview")},label:"Preview PDF"})]}),Object(l.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",height:"400px",marginInline:20},children:[Object(l.jsxs)("div",{children:[Object(l.jsx)("span",{children:"Instruction"}),Object(l.jsxs)("ol",{children:[Object(l.jsx)("li",{children:" Add Keyframe by clicking a frame on Timeline. "}),Object(l.jsx)("li",{children:" Remove Keyframe by clicking (x) on it. "}),Object(l.jsx)("li",{children:" Move Keyframe by dragging it on Timeline "}),Object(l.jsx)("li",{children:" Click on Keyframe to view the Keyframe on Video Player "}),Object(l.jsx)("li",{children:" Double click on frame to play from it"}),Object(l.jsx)("li",{children:" Export when you feel good about all the Keyframes "})]}),Object(l.jsx)("span",{children:"Keyframe Preview"}),Object(l.jsx)("div",{style:{display:"flex",border:"1px solid black",height:146,width:261,justifyContent:"center",alignItems:"center",marginLeft:30},children:Object(l.jsx)("img",{src:A,height:146,width:261})})]}),Object(l.jsx)(re.a,{videoId:s.split("=")[1],opts:{height:"390",width:"640",playerVars:{autoplay:1}},onReady:function(t){m(t.target),k(t.target.getDuration()),K(!1),e(_(t.target.getDuration())),t.target.playVideo()},onStateChange:function(e){}})]}),T?Object(l.jsx)(l.Fragment,{}):Object(l.jsx)(ae,{extractionProgress:n,isLoading:T,seconds:w,player:j,seekTo:function(e){j.seekTo(e),j.pauseVideo()},playAt:function(e){j.seekTo(e),j.playVideo()},hoverPreview:function(e){return B(e)}})]})}}),Object(l.jsx)(f.a,{exact:!0,path:"/preview",component:function(){var e=Object(o.b)(),t=Object(f.f)(),n=Object(o.c)(J),i=Object(c.useState)("New Note"),s=Object(b.a)(i,2),a=s[0],r=s[1],m=Object(c.useState)(!0),h=Object(b.a)(m,2),p=h[0],y=h[1],O=Object(c.useState)(!1),g=Object(b.a)(O,2),v=g[0],w=g[1];return Object(c.useEffect)((function(){var t;e((t=4,function(e,n){console.log("SYSTEM/processFrameScriptTuple");var c=Object(x.a)(n().system.keyframes);c.sort(V);var i=Array.from({length:c.length},(function(e,t){return t})).map((function(e){return{id:"fsd-".concat(e),frame:c[e].img_addr,transcript:"test script ".concat(e)}})),s=i.reduce((function(e,n,c){return(c%t==0?e.push([n]):e[e.length-1].push(n))&&e}),[]);console.log(i),console.log(s),e(B(s)),e(A(i.length/t)),e(N(i))}))}),[]),Object(l.jsxs)("div",{id:"original",children:[Object(l.jsx)("div",{id:"hideHeader",children:Object(l.jsx)(d,{})}),Object(l.jsxs)("div",{id:"hideButtons",style:{display:"flex",marginRight:20,marginBottom:10,justifyContent:"flex-end"},children:[Object(l.jsx)(u,{label:"Back",onClick:function(){t.push("editor")}}),Object(l.jsx)(u,{label:"Finish",onClick:function(){t.push("/")}})]}),Object(l.jsx)("div",{id:"hide",style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",marginInline:20},children:Object(l.jsxs)(j,{height:"20%",width:"80%",flexDirection:"column",children:[Object(l.jsx)("div",{children:Object(l.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between"},children:[Object(l.jsxs)("div",{style:{display:"flex",flex:1,alignItems:"center"},children:[" Page Title:",Object(l.jsx)("input",{style:{width:180,margin:5},class:"input",type:"text",value:a,onChange:function(e){return r(e.target.value)}})]}),Object(l.jsxs)("div",{style:{display:"flex",flex:2},children:["Export Format:",Object(l.jsxs)("div",{onChange:function(){return y(!p)},children:[Object(l.jsxs)("div",{children:[Object(l.jsx)("input",{type:"radio",id:"ft",name:"ft",value:"ft",checked:p}),Object(l.jsx)("label",{for:"ft",children:"Frames and Transcript"})]}),Object(l.jsxs)("div",{children:[Object(l.jsx)("input",{type:"radio",id:"fe",name:"fe",value:"fe",checked:!p}),Object(l.jsx)("label",{for:"fe",children:"Frames only"})]})]})]}),Object(l.jsxs)("div",{style:{display:"flex",flex:1},children:["Enable Key Frame Analysis:",Object(l.jsx)("input",{type:"checkbox",id:"KFA",name:"KFA",checked:v,onChange:function(){return w(!v)}})]})]})}),Object(l.jsx)(u,{label:"Print as PDF",onClick:function(){return document.getElementById("toPrint").style.overflow="unset",document.getElementById("hide").style.display="none",document.getElementById("hideHeader").style.display="none",document.getElementById("hideButtons").style.display="none",document.title=a,window.print(),document.getElementById("hide").style.display="flex",document.getElementById("hideButtons").style.display="flex",document.getElementById("hideHeader").style.display="flex",void(document.getElementById("toPrint").style.overflow="scroll")}})]})}),Object(l.jsx)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",marginInline:20},children:Object(l.jsxs)("div",{id:"toPrint",style:{overflowY:"scroll",height:580,display:"block",flexDirection:"column",justifyContent:"center",alignItems:"center",marginInline:20},children:[v?Object(l.jsx)(oe,{title:a,KFA:!0}):Object(l.jsx)(l.Fragment,{children:" "}),n?n.map((function(e,t){return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(oe,{title:a,contents:e,enableKFA:v,enableTranscript:p},t),Object(l.jsx)("div",{class:"pagebreak",children:" "})]})})):Object(l.jsx)("div",{children:"loading..."})]})})]})}}),Object(l.jsx)(f.a,{exact:!0,path:"/export",component:function(){return Object(l.jsx)("div",{children:Object(l.jsx)("span",{children:"Download PDF"})})}})]})})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[87,1,2]]]);
//# sourceMappingURL=main.4486db08.chunk.js.map